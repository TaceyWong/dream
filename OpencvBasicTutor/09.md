#三 访问图像数据 
    
> 通常，我们需要非常 迅速和高效地访问图像中的数据。这意味着我们不应受制于存取函数(如 cvSet*D 之类)。实际上，我们想要用最直接 的方式访问图像内的数据。现在，应用已掌握的 IplImage 内部结构的知识，我们知道怎样做才是最佳的方法。 

虽然 OpenCV 中有很多优化函数帮助我们完成大多数的图像处理的任务，但是还有一些任务，库中没有预先包装好的函数可以帮我 们解决。例如，如果我们有一个三通道 HSV 图像，在色度保持不变的情况下，我们要设置每个点的饱和度和高度为 255(8 位图像的最大值)，我们可以使用指针遍历图像，例 3-11 演示了最高效的方法。 
###例 3-11：仅最大化 HSV  图像“S”和“V”部分

```cpp 
void saturate_sv( IplImage*  img )  
{  
for(  int  y=0; y<img->height; y++  ) 
{ 
uchar *ptr=(uchar*)(img->imageData+y*img->widthStep); 
} 
for( int  x=0;  x<img->width;  x++  ) 
{ 
ptr[3*x+1]  = 255; 
ptr[3*x+2]  = 255; 
}  
} 
```

>在以上程序中，我们用指针 ptr 指向第 y 行的起始位置 。接着，我们从指针中析出饱和度和高度在 x 维的值。因为这是一个三通道图像，所以 C 通道在 x 行的位置是 3*x+c。 
